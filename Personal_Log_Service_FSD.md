# 기능 명세서 (FSD)

## 1. 개요
이 문서는 개인 기록 서비스의 핵심 기능 요구사항을 정의한다.  
사용자는 **영화, 도서, 장소 리뷰를 작성·조회·분석**할 수 있으며, 데이터는 Firebase를 기반으로 관리된다.

---

## 2. 주요 페이지 및 기능

### 2.1 회원 관리
| 기능 | 설명 | 관련 서비스 |
|------|------|--------------|
| 회원가입 | 이메일 또는 구글 계정을 이용한 회원가입 | Firebase Authentication |
| 로그인 | 기존 계정 로그인 | Firebase Auth |
| 로그아웃 | 사용자 세션 종료 | Firebase Auth |
| 사용자 정보 수정 | 이름 등 기본 정보 수정 | Firestore (Users 컬렉션) |

---

### 2.2 리뷰 입력 페이지

#### 영화 기록
| 항목 | 설명 | 필수 여부 |
|------|------|-----------|
| 제목 | 영화 제목 | ✅ |
| 출연자 | 주요 출연 배우 |  |
| 감독 | 감독명 |  |
| 시청한 날짜 | YYYY-MM-DD 형식 | ✅ |
| 평가 | 1~5점 별점 | ✅ |
| 포스터 | 이미지 업로드 (Storage 경로 저장) |  |
| 리뷰 내용 | 자유 입력형 텍스트 | ✅ |

#### 도서 기록
| 항목 | 설명 | 필수 여부 |
|------|------|-----------|
| 제목 | 도서 제목 | ✅ |
| 저자 | 도서 저자명 | ✅ |
| 출판사 | 출판사명 |  |
| 읽기 시작한 날짜 | YYYY-MM-DD 형식 | ✅ |
| 다 읽은 날짜 | YYYY-MM-DD 형식 | ✅ |
| 평가 | 1~5점 별점 | ✅ |
| 표지 | 이미지 업로드 |  |
| 리뷰 내용 | 자유 입력형 텍스트 | ✅ |

#### 장소 기록
| 항목 | 설명 | 필수 여부 |
|------|------|-----------|
| 장소명 | 방문한 장소 이름 | ✅ |
| 위치 | 주소 또는 지역명 | ✅ |
| 방문한 날짜 | YYYY-MM-DD 형식 | ✅ |
| 평가 | 1~5점 별점 | ✅ |
| 사진 | 이미지 업로드 |  |
| 리뷰 내용 | 자유 입력형 텍스트 | ✅ |

---

### 2.3 기록 리스트 페이지
| 기능 | 설명 | 동작 방식 |
|------|------|------------|
| 전체 보기 | 모든 리뷰를 최신순으로 표시 | Firestore 쿼리 (정렬 by created_at desc) |
| 카테고리별 보기 | 영화, 도서, 장소별 필터링 | Firestore where(category == 선택값) |
| 상세 보기 이동 | 클릭 시 개별 리뷰 상세 페이지로 이동 | Router push(`/record/:id`) |
| 작성 버튼 | Floating Action Button 클릭 시 입력 페이지 이동 | onClick → /create |

---

### 2.4 통계 페이지
| 기능 | 설명 | 기술 구현 |
|------|------|------------|
| 한눈에 보기 | 요약 통계 (총 리뷰 수, 평균 별점 등) | Firestore Aggregate 쿼리 |
| 자세히 보기 | 카테고리별 리뷰 수, 별점 분포 | Chart.js (Pie / Bar Chart) |
| 월별 트렌드 | 월별 리뷰 작성 추이 | Chart.js (Line Chart) |

---

### 2.5 UI 구성 요소
| 구성 요소 | 설명 | 기술 |
|------------|------|------|
| 네비게이션 바 | 홈 / 기록 / 통계 / 마이 | React Router, Tailwind |
| 별점 컴포넌트 | 클릭 가능한 별 UI | React useState |
| DatePicker | 날짜 선택 컴포넌트 | React-Datepicker |
| 이미지 업로드 | Firebase Storage 연동 | storage.ref().put(file) |

---

## 3. 데이터 흐름 요약
1. 사용자 로그인 → Firebase Auth 세션 발급  
2. 기록 작성 시 Firestore에 문서 생성 (`records` 컬렉션)  
3. Storage에 이미지 업로드 후 URL을 `records.image_url`에 저장  
4. 통계 페이지는 Firestore 데이터를 기반으로 Chart.js 시각화  
5. 사용자별 데이터 접근은 보안 규칙(`user_id == auth.uid`)으로 제한  

---

## 4. 예외 및 에러 처리
| 상황 | 처리 방식 |
|------|------------|
| 네트워크 불안정 | “연결이 원활하지 않습니다” 안내 표시 |
| Firebase 인증 실패 | 로그인 페이지로 리다이렉트 |
| 이미지 업로드 실패 | Alert 표시 및 재시도 버튼 제공 |
| 입력 누락 | 필수 입력 항목 미입력 시 경고 표시 |

---

## 5. 성능 및 보안
- 데이터 캐싱: Firebase SDK 로컬 캐시 활성화  
- 이미지 최적화: Storage 업로드 시 리사이징  
- Firestore Rules: 사용자별 데이터 접근 통제  
- HTTPS 통신, Firebase Hosting 기본 보안 적용  

---

## 6. 향후 확장 고려
- AI 리뷰 요약 생성 (OpenAI API 연동)  
- 친구 초대 및 기록 공유 기능  
- 사용자 맞춤형 통계 리포트 생성  

---

이 문서는 **개발자·기획자 간 공통 참조용**으로 사용되며, PRD·TRD의 기술적 세부사항을 바탕으로 실제 구현 단계에서 참조된다.
